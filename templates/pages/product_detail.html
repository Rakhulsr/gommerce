{{ define "product" }}

<section class="pb-6">

  <div class="mb-6 mt-2">
    <!-- <a href="/products" class="inline-flex items-center gap-1 text-green-600 hover:text-green-700 text-sm underline transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Kembali
    </a> -->

</div>
  

  <div class="flex flex-col lg:flex-row gap-10">
    <div class="lg:w-1/2">
      {{ if gt (len .product.ProductImages) 0 }}
        
        <img id="mainImage" src="{{ (index .product.ProductImages 0).ExtraLarge }}" alt="{{ .product.Name }}" class="rounded-lg w-full h-96 object-cover" />

        {{ if gt (len .product.ProductImages) 1 }}
       
        <div class="grid grid-cols-4 gap-2 mt-4">
          {{ range .product.ProductImages }}
            <img
              src="{{ .Small }}"
              alt="Thumbnail"
              class="h-20 w-full object-cover rounded border cursor-pointer hover:opacity-80 transition"
              onclick="setMainImage('{{ .ExtraLarge }}')"
            />
          {{ end }}
        </div>
        {{ end }}
      {{ else }}
       
        <img src="/images/product/ss.jpg" alt="Tidak ada gambar" class="rounded-lg w-full h-96 object-cover" />
      {{ end }}
    </div>

    <div class="lg:w-1/2">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">{{ .product.Name }}</h1>

      <div class="flex items-center gap-4 mb-4">
        <p class="text-green-600 text-2xl font-bold">{{ rupiah .product.Price }}</p>
        
        <span class="text-sm text-gray-500">Berat: {{ .product.Weight }} kg</span>
      </div>

     
      <div class="mb-4">
        <h4 class="text-sm font-semibold text-gray-700 mb-1">Kategori:</h4>
        <ul class="flex flex-wrap gap-2">
          {{ range .product.Categories }}
            <li class="text-xs bg-gray-200 text-gray-700 px-3 py-1 rounded">{{ .Name }}</li>
          {{ end }}
        </ul>
      </div>

   
      {{ if .product.ShortDescription }}
      <p class="text-sm text-gray-600 mb-6">{{ .product.ShortDescription }}</p>
      {{ end }}

    
      <form action="/carts/add" method="POST" class="mt-6 w-full max-w-sm" id="cartForm">
        <input type="hidden" name="product_id" value="{{ .product.ID }}" />

        <p id="productPrice" data-value="{{ .product.Price }}" class="hidden"></p>

        <h3 class="text-base font-semibold text-gray-800 mb-2">Atur jumlah</h3>

        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center border border-gray-300 rounded-md px-2 py-1">
            <button
              type="button"
              onclick="decreaseQuantity()"
              class="text-xl text-gray-500 hover:text-gray-700 px-2"
            >âˆ’</button>

            <input
              type="number"
              id="qty"
              name="qty"
              value="1"
              min="1"
              class="w-10 text-center border-none outline-none text-sm bg-transparent"
            />

            <button
              type="button"
              onclick="increaseQuantity()"
              class="text-green-600 text-xl font-bold hover:text-green-700 px-2"
            >+</button>
          </div>

          <p class="text-sm text-gray-700">
            Stok Total:
            <span class="text-yellow-600 font-semibold">Sisa {{ .product.Stock }}</span>
          </p>
        </div>

        <div class="mb-4">
          <p class="text-sm text-gray-500">Subtotal</p>
          <p id="subtotal" class="text-xl font-bold text-black">{{ rupiah .product.Price }}</p>
        </div>

       <input type="hidden" name="action" id="actionInput" value="">

        <!-- Tombol + Keranjang -->
      <button
        type="submit"
        onclick="setAction('cart')"
        class="w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg shadow transition"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.3 5.6a1 1 0 001 1.4h12.6a1 1 0 001-1.4L17 13M9 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"/>
        </svg>
        + Keranjang
      </button>

     
      <button
        type="submit"
        onclick="setAction('buy')"
        class="w-full flex items-center justify-center gap-2 border border-green-600 text-green-700 hover:bg-green-50 font-semibold py-3 rounded-lg transition mt-3"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M12 8c1.104 0 2-.672 2-1.5S13.104 5 12 5s-2 .672-2 1.5S10.896 8 12 8zm0 0v4m0 4h.01"/>
        </svg>
        Beli Sekarang
      </button>


      </form>

    </div>
  </div>

  
  <div class="mt-12">
    <h2 class="text-xl font-bold text-gray-800 mb-4">Deskripsi Produk</h2>
    <p class="text-sm text-gray-700 leading-relaxed whitespace-pre-line">{{ .product.Description }}</p>
  </div>
   <div class="border-t border-gray-300 my-1"></div>

</section>

{{ end }}
