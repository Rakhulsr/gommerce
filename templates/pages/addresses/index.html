{{ define "auth/addresses_list" }}
<div class="flex-grow container mx-auto px-4 py-8 max-w-4xl">
   

    <div class="bg-white p-8 rounded-lg shadow-md">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">{{ .Title }}</h2>
            <a href="/addresses/add" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500">
                <svg class="-ml-1 mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                </svg>
                Tambah Alamat Baru
            </a>
        </div>

        {{ if .Message }}
        <div class="p-4 mb-4 text-sm rounded-lg {{ if eq .MessageStatus "success" }}bg-green-100 text-green-800{{ else if eq .MessageStatus "error" }}bg-red-100 text-red-800{{ else }}bg-blue-100 text-blue-800{{ end }}" role="alert">
            {{ .Message }}
        </div>
        {{ end }}

        {{ if .Addresses }}
        <div class="space-y-4">
            {{ range .Addresses }}
            <div class="border rounded-lg p-4 shadow-sm {{ if .IsPrimary }}border-indigo-600 ring-2 ring-indigo-500{{ else }}border-gray-200{{ end }}">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-lg font-semibold text-gray-900">{{ .Address1 }}</p>
                        {{ if .Address2 }}
                        <p class="text-sm text-gray-600">{{ .Address2 }}</p>
                        {{ end }}
                        <p class="text-sm text-gray-600">{{ .Phone }}</p>
                        <p class="text-sm text-gray-600">
                            Kel. {{ .LocationName | extractSubdistrict }}, Kec. {{ .LocationName | extractDistrict }}, Kota {{ .LocationName | extractCity }}, Prov. {{ .LocationName | extractProvince }}
                        </p>
                        <p class="text-sm text-gray-600">Kode Pos: {{ .PostCode }}</p>
                        
                    </div>
                    <div class="flex space-x-2 mt-1">
                       
                        <div class="flex-1">
                            <button onclick="window.location.href='/addresses/edit/{{ .ID }}'" type="button" class="inline-flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition ease-in-out duration-150 w-full">
                                Edit
                            </button>
                        </div>
                        
                        <div class="flex-1">
                            <form action="/addresses/delete/{{ .ID }}" method="POST" onsubmit="return confirmDelete(event);">
                                <input type="hidden" name="_method" value="DELETE">
                                <button type="submit" class="text-white bg-red-500 hover:bg-red-600 px-4 py-2 rounded-md text-sm font-medium transition duration-200 ease-in-out shadow-md">
                                    Hapus
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
            </div>
            {{ end }}
        </div>
        {{ else }}
        <div class="text-center py-10">
            <p class="text-gray-500">Anda belum memiliki alamat tersimpan.</p>
            <p class="text-gray-500">Klik "Tambah Alamat Baru" untuk menambahkan alamat pertama Anda.</p>
        </div>
        {{ end }}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function confirmDelete(event) {
            event.preventDefault();
            Swal.fire({
                title: 'Apakah Anda yakin?',
                text: "Alamat ini akan dihapus secara permanen!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Ya, hapus!',
                cancelButtonText: 'Batal'
            }).then((result) => {
                if (result.isConfirmed) {
                    event.target.submit();
                }
            });
            return false;
        }
    </script>
</div>
{{ end }}